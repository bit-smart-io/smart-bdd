<!--
  ~ Smart BDD - The smart way to do behavior-driven development.
  ~ Copyright (C)  2021  James Bayliss
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <https://www.gnu.org/licenses/>.
  -->

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Test Suite Result</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({startOnLoad:true});
    </script>
    <script src="https://kit.fontawesome.com/d298eef3d4.js" crossorigin="anonymous"></script>
    <!-- This is for coloured syntax highlighting. For this to work we'd have to copy the css and js across to the temp dir.
         1. we can get from a cdn
         2. is it a good idea to have css/js files? Kinda neat just having one file.
     -->
<!--    <link href="prism.css" rel="stylesheet" /> -->
</head>
<body>
<!-- see above notes -->
<!--<script src="prism.js"></script>-->
<section class="section">

    <nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs">
        <ul>
            <li><a href="./index.html">index</a></li>
            <li class="is-active"><a href="#" aria-current="page" th:text="${testSuite.name}"/></li>
        </ul>
    </nav>

    <div class="container">
        <div class="pb-6">
            <h1 class="title">
                <span class="has-text-success">Feature: </span>
                <span class="white-space: pre-wrap" th:text="${testSuite.title}"/>
            </h1>
            <h2 class="subtitle" th:if="${testSuite.notes}">
                <span th:each="note : ${testSuite.notes.textNotes}">
                    <p>
                        <span style="white-space: pre-wrap" th:text="${note}"></span>
                    </p>
                </span>
            </h2>
        </div> <!-- end title -->
        <div class="content pb-4" th:each="testCase : ${testCases}">
            <h4 class="title">
                <span class="icon-text">
                  <span class="icon has-text-success">
                    <i class="far fa-play-circle"></i>
                  </span>
                </span>
                <span class="has-text-success">Scenario: </span>
                <span th:text="${testCase.method.wordify} + ' (' + ${testCase.status} + ')'"/>
            </h4>
            <p style="white-space: pre-wrap" th:text="${testCase.wordify}"></p>

            <span th:if="${testCase.notes and testCase.notes.textNotes}">
                <span th:each="note : ${testCase.notes.textNotes}">
                    <p>
                        <span>Note: </span>
                        <span style="white-space: pre-wrap" class="green" th:text="${note}"></span>
                    </p>
                </span>
            </span>
            <span th:if="${testCase.notes}">
                <span th:each="diagram : ${testCase.notes.diagrams}">
                    <span class="mermaid" style="white-space: pre-wrap" th:text="${diagram}" ></span>
                </span>
            </span>
        </div>
    </div><!-- end container -->
</section>
</div>
</div>
</body>

<footer class="footer">
    <div class="content has-text-centered">
        <p> Generated by <strong>Smart BDD</strong>
            <span th:text="${versionInfo.getDateTimeAsString()}"> </span>
            on host
            <span th:text="${versionInfo.getHostname()}"> </span>
        </p>
        <p>
            <strong>Smart BDD</strong> by James Bayliss. The source code is licensed
            <a href="https://choosealicense.com/licenses/gpl-3.0/">GLPv3.0</a>.
        </p>
    </div>
</footer>
</html>